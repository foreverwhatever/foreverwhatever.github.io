---
layout: post
modified_date: May 17, 2017
name: 2015-12-29-wsyiwyg
path: whatever

description: live preview blogging with jupyter and jekyll.
kernelspec:
  display_name: Python 3
  language: python
  name: python3
language_info:
  codemirror_mode:
    name: ipython
    version: 3
  file_extension: .py
  mimetype: text/x-python
  name: python
  nbconvert_exporter: python
  pygments_lexer: ipython3
  version: 3.5.3
title: '`jupyter` & `jekyll`'

---


        {% raw %}

# development


```python
        import random; from IPython import display; o = __name__ == '__main__'
```

## conversion


```python
        !time jupyter nbconvert --config ../_layouts/markdown.py --output-dir ../_posts --template ../_layouts/jekyll.md.tpl 2015-12-28-jekyll-and-jupyter.ipynb
```

---
    [NbConvertApp] Converting notebook 2015-12-28-jekyll-and-jupyter.ipynb to markdown
    [NbConvertApp] Writing 10459 bytes to ../_posts/2015-12-28-jekyll-and-jupyter.md
    
    real	0m0.909s
    user	0m0.819s
    sys	0m0.072s

---

## `watchdog`

        


```python
        %%file tricks.yml
        tricks:
        - watchdog.tricks.ShellCommandTrick:
            patterns: ['*.ipynb']
            ignore_patterns: ["*~*.ipynb",  "*-checkpoint.ipynb"]
            shell_command: >
                jupyter nbconvert 
                --config ../_layouts/markdown.py --template ../_layouts/jekyll.md.tpl 
                --output-dir ../_posts  "${watch_src_path}"
```

---
    Overwriting tricks.yml

---

        {% endraw %}

## services

The services automatically ⓵ convert `notebook`s to `front matter/markdown`  & ⓶ compile and serve the static `jekyll` site.

⓵ __convert `notebooks` to `markdown`__ Run `watchdog`'s `watchmedo` scripts that runs `tricks.yml`.  `watchdog` runs in a separate thread and does not interrupt any notebook services directly.  `post_save_hook` approaches can cause some lag in the `notebook` experience.

⓶ __serve `jekyll`__ - watch for incremental changes to `_posts` and `_pages`.  each page updates after `watchdog` transformed a `notebook`

> ### in `notebook` mode

Open __<del>2</del>__ terminals 


```python
        terminal = lambda alias: display.IFrame(
            "http://localhost:8888/terminals/{}".format(alias or random.randint()), width=900, height=350)
```

to observe the conversions with the following `commands`


```python
        commands = """watchmedo tricks-from tricks.yml
        jekyll serve -wit"""
```

---


```python
        def comment(data: display.display):
            """print comment tags around display objects to suppress jekyll rendering."""
            print("{"+"% comment %}")
            try:
                display.display(*data)
            except:
                display.display(data)
            print("{"+"% endcomment %}")
            return data
```

---


```python
        True and o and comment([
            terminal(alias=line.strip().split(' ', 1)[0]) for line in commands.splitlines()]);
```

---
    {% comment %}

---

<div class="output_html rendered_html output_subarea ">

        <iframe
            width="900"
            height="350"
            src="http://localhost:8888/terminals/watchmedo"
            frameborder="0"
            allowfullscreen
        ></iframe>
        
</div>

<div class="output_html rendered_html output_subarea ">

        <iframe
            width="900"
            height="350"
            src="http://localhost:8888/terminals/jekyll"
            frameborder="0"
            allowfullscreen
        ></iframe>
        
</div>

---
    {% endcomment %}

---

List running processes


```python
        True and o and comment(display.IFrame("http://localhost:8888/tree#running", width=900, height=400));
```

---
    {% comment %}

---

<div class="output_html rendered_html output_subarea ">

        <iframe
            width="900"
            height="400"
            src="http://localhost:8888/tree#running"
            frameborder="0"
            allowfullscreen
        ></iframe>
        
</div>

---
    {% endcomment %}

---

> a video clip of the real time rendering.
